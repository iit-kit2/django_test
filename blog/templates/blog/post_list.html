
{% extends 'blog/base.html' %}
{% block content %}
<div id = "scr_box" class="col-md-8">
	{% for post in posts %}
	<div class="post">
		<div class="date">
			<p>published: {{ post.published_date }}</p>
		</div>
		<h2><a href="">{{ post.title }}</a></h2>
		<p>{{ post.text|linebreaksbr }}</p>
	</div>
	{% endfor %}
</div>

<script>
function yHandler(){
	var content = document.getElementById('scr_box');
	var contentHeight = content.offsetHeight;
	var yOffset = window.pageYOffset; 
	var y = yOffset + window.innerHeight;
	if(y >= contentHeight){
		$('.col-md-8').append('{% for post in posts %}<div class="post"><div class="date"><p>published: {{ post.published_date }}</p></div><h2><a href="">{{ post.title }}</a></h2><p>{{ post.text|linebreaksbr }}</p></div>{% endfor %}');
	}
}
window.onscroll = yHandler;	
</script>
{% endblock %}